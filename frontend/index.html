<!DOCTYPE html>
<html lang="en">

<head>
    <title>To Do List </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="//fonts.googleapis.com/css?family=Lato">
    <link href="//fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900">
    <link href="//fonts.googleapis.com/css?family=Muli">
</head>

<body id="page-top" class="primary-night">
    <nav id="side-bar" class="laptop">
        <center>
            <div class="item-title primary-night col-sm-12">
                <a onclick="changeHome();">
                    <h4>Home</h4>
                </a>
            </div>
            <div class="clearfix"></div>
            <div class="item col-md-12">
                <div class="item-image header-design">
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-sm-12 center">
                <center>
                    <span class="border-icon primary-color" style="width: 95%;" data-toggle="tooltip" title="Click to open Link" onclick="openLink('https://drive.google.com/open?id=1eMKs8Zvo37_aIguzM-IKnR8avf49znqy')" class="">LOGIN</span>
                </center>
            </div>
            <div class="col-sm-12 center">
                <br>
                <br>
                <center>
                    <span class="border-icon resume-color" style="width: 95%;" data-toggle="tooltip" title="Click to open Link" onclick="openLink('https://drive.google.com/open?id=1eMKs8Zvo37_aIguzM-IKnR8avf49znqy')" class="">SIGN UP</span>
                </center>
            </div>
        </center>
    </nav>
    <div id="content-container" class="fluid-container">
        <div class="item-title nav-button">
            <h4 onclick="closeSideBar();" id="close">X</h4>
        </div>
        <div class="item-title nav-button">
            <h4 onmouseover="openSideBar();" onclick="openSideBar();" id="open">></h4>
        </div>
        <br>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class=" primary-black col-md-6">
                        <div class="open-description highlight-box">
                            <h4>Add new task</h4>
                            <br>
                            <br>
                            <div class="col-sm-4">
                                <label for="new_title" class="control-label minotaur-label">Ttile :</label>
                            </div>
                            <div class="col-sm-8">
                                <div class="form-group">
                                    <textarea class="form-control" name="new_title" id="new_title" ng-maxlength="1000" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label for="new_description" class="control-label minotaur-label">Description :</label>
                            </div>
                            <div class="col-sm-8">
                                <div class="form-group">
                                    <textarea class="form-control" name="new_description" id="new_description" ng-maxlength="1000" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <center>
                                    <span class="border-icon resume-color" style="width: 100%; border: 2px solid; padding-bottom: 28px;" data-toggle="tooltip" title="Add task" onclick="add_task()">Add Task</span>
                                </center>
                            </div>
                        </div>
                    </div>

                    <div class=" primary-black col-md-6">
                        <div class="open-description highlight-box">
                            <p class="layer-100">
                                <div class="col-md-11">
                                    <h4>Edit task</h4>
                                    <br>
                                    <br>
                                    <div class="col-sm-4">
                                        <label for="normal_value" class="control-label minotaur-label">Ttile :</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="form-group">
                                            <textarea class="form-control" name="normal_value" id="normal_value" ng-maxlength="1000" required></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="normal_value" class="control-label minotaur-label">Description :</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="form-group">
                                            <textarea class="form-control" name="normal_value" id="normal_value" ng-maxlength="1000" required></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <b>Title :</b> I love to work on Data it always made me wonder what we can't do with it. Some database technologies i have worked on are <b>MySQL, MongoDB</b>. Database Development made me push my limit to think ways to develop collection
                                    <br>
                                    <br>
                                    <b>Description :</b> I love to work on Data it always made me wonder what we can't do with it. Some database technologies i have worked on are <b>MySQL, MongoDB</b>. Database Development made me push my limit to think ways to develop collections, structure and relations so that they are optimum as well as future-ready. Working on Database always allowed to extend limits of my thinking ability and find creative solutions.
                                </div>
                            </p>
                            <div class="tool-box">
                                <div class="fluid-container">
                                    <center>
                                        <div data-toggle="tooltip" title="Delete" data-toggle="tooltip" title="Click to delete task" class="border-icon red-color">
                                            <i class="fa fa-trash"></i>
                                        </div>
                                        <div class="border-icon red-color"></div>
                                        <div data-toggle="tooltip" title="Edit" data-toggle="tooltip" title="Click to edit task" class="border-icon primary-color">
                                            <i class="fa fa-pencil"></i>
                                        </div>
                                        <div class="border-icon red-color"></div>
                                        <div data-toggle="tooltip" title="Delete" data-toggle="tooltip" title="Click to delete task" class="border-icon resume-color">
                                            <i class="fa fa-check-square-o"></i>
                                        </div>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <script type="text/javascript">
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        
        var csrftoken = getCookie('csrftoken');
        var base_url = "http://127.0.0.1:8000";

        function add_task() {
            var new_title = document.getElementById('new_title').value;
            var new_description = document.getElementById('new_description').value;
            console.log(new_title, new_description)
            if(new_title != undefined && new_title != null && new_description != undefined && new_description != null) {
                $.ajax({
                    url: base_url+"/add_task/",
                    type: "post",    
                    header: {
                        X-CSRFToken: csrftoken,
                        Content-Type: "application/x-www-form-urlencoded",
                        Access-Control-Allow-Origin: "http://127.0.0.1/",
                    },
                    data: {'title': new_title, 'description': new_description},
                }).success(function(status, res) {
                    Swal.fire({
                      position: 'top-end',
                      icon: 'success',
                      title: 'Added Task Successfully',
                      showConfirmButton: false,
                      timer: 1500
                    })
                    location.reload();
                });
            }
            else {
                Swal.fire({
                  position: 'top-end',
                  icon: 'error',
                  title: 'Error in values entered',
                  showConfirmButton: false,
                  timer: 1500
                })
            }
        }

        function update_task(id) {
            var new_title = document.getElementById('new_title'+id).value;
            var new_description = document.getElementById('new_description'+id).value;

            if(id != undefined && id != null && new_title != undefined && new_title != null && new_description != undefined && new_description != null) {
                $.ajax({
                    url: base_url+"/update_task/",
                    type: "put",    
                    headers: {
                        "X-CSRFToken": csrftoken,
                        "Access-Control-Allow-Headers": *
                        "Access-Control-Allow-Origin": "127.0.0.1"
                    },
                    data: {'id': id, 'title': new_title, 'description': new_description, 'action': "UPDATE"},
                    dataType: 'json'
                }).success(function(status, res) {
                    Swal.fire({
                      position: 'top-end',
                      icon: 'success',
                      title: 'Added Edit Successfully',
                      showConfirmButton: false,
                      timer: 1500
                    })
                    location.reload();
                });
            }
            else {
                Swal.fire({
                  position: 'top-end',
                  icon: 'error',
                  title: 'Error in values entered',
                  showConfirmButton: false,
                  timer: 1500
                })
            }
        }

        function delete_task(id) {
            if(id != undefined && id != null) {
                $.ajax({
                    url: base_url+"/delete_task/",
                    type: "delete",    
                    headers: {
                        "X-CSRFToken": csrftoken,
                        "Access-Control-Allow-Origin": "127.0.0.1"
                    },
                    data: {'id': id},
                    dataType: 'json'
                }).success(function(status, res) {
                    Swal.fire({
                      position: 'top-end',
                      icon: 'success',
                      title: 'Delete Task Successfully',
                      showConfirmButton: false,
                      timer: 1500
                    })
                    location.reload();
                });
            }
            else {
                Swal.fire({
                  position: 'top-end',
                  icon: 'error',
                  title: 'Error in Deleting Task',
                  showConfirmButton: false,
                  timer: 1500
                })
            }
        }

        function check_task(id) {

            if(id != undefined && id != null) {
                $.ajax({
                    url: base_url+"/update_task/",
                    type: "delete",    
                    headers: {
                        "X-CSRFToken": csrftoken,
                        "Access-Control-Allow-Origin": "127.0.0.1"
                    },
                    data: {'id': id, 'action': "CHECK"},
                    dataType: 'json'
                }).success(function(status, res) {
                    Swal.fire({
                      position: 'top-end',
                      icon: 'success',
                      title: 'Checked Task Successfully',
                      showConfirmButton: false,
                      timer: 1500
                    })
                    location.reload();
                });
            }
            else {
                Swal.fire({
                  position: 'top-end',
                  icon: 'error',
                  title: 'Error in checking task',
                  showConfirmButton: false,
                  timer: 1500
                })
            }
        }
    </script>
</body>

</html>